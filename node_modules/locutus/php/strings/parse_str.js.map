{"version":3,"sources":["../../../src/php/strings/parse_str.js"],"names":["module","exports","parse_str","str","array","strArr","String","replace","split","sal","length","i","j","ct","p","lastObj","obj","undef","chr","tmp","key","value","postLeftBracketPos","keys","keysLen","_fixStr","decodeURIComponent","$global","window","global","$locutus","php","charAt","slice","indexOf","push","substr","hasOwnProperty","match"],"mappings":"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","file":"parse_str.js","sourcesContent":["module.exports = function parse_str (str, array) { // eslint-disable-line camelcase\n  //       discuss at: http://locutus.io/php/parse_str/\n  //      original by: Cagri Ekin\n  //      improved by: Michael White (http://getsprink.com)\n  //      improved by: Jack\n  //      improved by: Brett Zamir (http://brett-zamir.me)\n  //      bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n  //      bugfixed by: Brett Zamir (http://brett-zamir.me)\n  //      bugfixed by: stag019\n  //      bugfixed by: Brett Zamir (http://brett-zamir.me)\n  //      bugfixed by: MIO_KODUKI (http://mio-koduki.blogspot.com/)\n  // reimplemented by: stag019\n  //         input by: Dreamer\n  //         input by: Zaide (http://zaidesthings.com/)\n  //         input by: David Pesta (http://davidpesta.com/)\n  //         input by: jeicquest\n  //           note 1: When no argument is specified, will put variables in global scope.\n  //           note 1: When a particular argument has been passed, and the\n  //           note 1: returned value is different parse_str of PHP.\n  //           note 1: For example, a=b=c&d====c\n  //        example 1: var $arr = {}\n  //        example 1: parse_str('first=foo&second=bar', $arr)\n  //        example 1: var $result = $arr\n  //        returns 1: { first: 'foo', second: 'bar' }\n  //        example 2: var $arr = {}\n  //        example 2: parse_str('str_a=Jack+and+Jill+didn%27t+see+the+well.', $arr)\n  //        example 2: var $result = $arr\n  //        returns 2: { str_a: \"Jack and Jill didn't see the well.\" }\n  //        example 3: var $abc = {3:'a'}\n  //        example 3: parse_str('a[b][\"c\"]=def&a[q]=t+5', $abc)\n  //        example 3: var $result = $abc\n  //        returns 3: {\"3\":\"a\",\"a\":{\"b\":{\"c\":\"def\"},\"q\":\"t 5\"}}\n\n  var strArr = String(str).replace(/^&/, '').replace(/&$/, '').split('&')\n  var sal = strArr.length\n  var i\n  var j\n  var ct\n  var p\n  var lastObj\n  var obj\n  var undef\n  var chr\n  var tmp\n  var key\n  var value\n  var postLeftBracketPos\n  var keys\n  var keysLen\n\n  var _fixStr = function (str) {\n    return decodeURIComponent(str.replace(/\\+/g, '%20'))\n  }\n\n  var $global = (typeof window !== 'undefined' ? window : global)\n  $global.$locutus = $global.$locutus || {}\n  var $locutus = $global.$locutus\n  $locutus.php = $locutus.php || {}\n\n  if (!array) {\n    array = $global\n  }\n\n  for (i = 0; i < sal; i++) {\n    tmp = strArr[i].split('=')\n    key = _fixStr(tmp[0])\n    value = (tmp.length < 2) ? '' : _fixStr(tmp[1])\n\n    while (key.charAt(0) === ' ') {\n      key = key.slice(1)\n    }\n    if (key.indexOf('\\x00') > -1) {\n      key = key.slice(0, key.indexOf('\\x00'))\n    }\n    if (key && key.charAt(0) !== '[') {\n      keys = []\n      postLeftBracketPos = 0\n      for (j = 0; j < key.length; j++) {\n        if (key.charAt(j) === '[' && !postLeftBracketPos) {\n          postLeftBracketPos = j + 1\n        } else if (key.charAt(j) === ']') {\n          if (postLeftBracketPos) {\n            if (!keys.length) {\n              keys.push(key.slice(0, postLeftBracketPos - 1))\n            }\n            keys.push(key.substr(postLeftBracketPos, j - postLeftBracketPos))\n            postLeftBracketPos = 0\n            if (key.charAt(j + 1) !== '[') {\n              break\n            }\n          }\n        }\n      }\n      if (!keys.length) {\n        keys = [key]\n      }\n      for (j = 0; j < keys[0].length; j++) {\n        chr = keys[0].charAt(j)\n        if (chr === ' ' || chr === '.' || chr === '[') {\n          keys[0] = keys[0].substr(0, j) + '_' + keys[0].substr(j + 1)\n        }\n        if (chr === '[') {\n          break\n        }\n      }\n\n      obj = array\n      for (j = 0, keysLen = keys.length; j < keysLen; j++) {\n        key = keys[j].replace(/^['\"]/, '').replace(/['\"]$/, '')\n        lastObj = obj\n        if ((key !== '' && key !== ' ') || j === 0) {\n          if (obj[key] === undef) {\n            obj[key] = {}\n          }\n          obj = obj[key]\n        } else {\n          // To insert new dimension\n          ct = -1\n          for (p in obj) {\n            if (obj.hasOwnProperty(p)) {\n              if (+p > ct && p.match(/^\\d+$/g)) {\n                ct = +p\n              }\n            }\n          }\n          key = ct + 1\n        }\n      }\n      lastObj[key] = value\n    }\n  }\n}\n"]}