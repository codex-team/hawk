<form method="POST" action="settings/save" onsubmit="hawk.settingsForm.checkForm(event);">

    {% if success is not null %}
      <script>
        hawk.docReady(function () {
          hawk.notifier.show({
            message: "{{ message ? message : '' }}",
            style: "{{ success == '1' ? 'success' : 'error' }}"
          })
        });
      </script>
    {% endif %}

    {% include 'csrf.twig' with {csrfToken: csrfToken} %}

    <h4 class="form__header">Account settings</h4>
    <fieldset class="form__section">
        <label class="form__label" for="email">Change email</label>
        <input class="form__width-fixed" type="email" id="email" name="email" value="{{ user.email }}" required>
    </fieldset>
    <fieldset class="form__section">
        <label class="form__label" for="password">Select password</label>
        <input class="form__width-fixed" type="password" id="password" name="password" placeholder="********">
    </fieldset>
    <fieldset class="form__section">
        <label class="form__label" for="password">Repeat password</label>
        <input class="form__width-fixed" type="password" id="repeatedPassword" name="repeatedPassword" placeholder="********">
    </fieldset>

    <h4 class="form__header">Notifications</h4>

    <fieldset class="form__section">
        <label name="custom-checkbox"
               class="form__checkbox"
               data-name="email-notify"
               {{ user.notifies.email ? 'data-checked="true"' :}}>
            Email
        </label>
        <label name="custom-checkbox"
               class="form__checkbox"
               data-name="tg-notify"
               {{ user.notifies.tg ? 'data-checked="true"' :}}>
            Telegram
        </label>
        <label name="custom-checkbox"
               class="form__checkbox"
               data-name="slack-notify"
               {{ user.notifies.slack ? 'data-checked="true"' :}}>
            Slack
        </label>
    </fieldset>

    <fieldset class="form__section">
        <label class="form__label" for="tg-webhook">Telegram Webhook</label>
        <input class="form__width-fixed"
               name="tg-webhook"
               id="tg-webhook"
               type="url"
               value="{{ user.tgHook }}"
               placeholder="https://notify.bot.ifmo.su/u/DN5N89E3">
    </fieldset>
    <fieldset class="form__section">
        <label class="form__label" for="slack-webhook">Slack Webhook</label>
        <input class="form__width-fixed"
               name="slack-webhook"
               id="slack-webhook"
               type="url"
               value="{{ user.slackHook }}"
               placeholder="https://notify.bot.ifmo.su/u/VI90Z3NM">
    </fieldset>

    <div class="garage-settings__integrations-link">Read more about <a class="inline-link">Telegram and Slack integrations</a></div>

    <input class=" button--submit" type="submit" value="Save">
</form>
